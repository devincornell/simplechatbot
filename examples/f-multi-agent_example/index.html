
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://devincornell.github.io/simplechatbot/examples/f-multi-agent_example/">
      
      
        <link rel="prev" href="../d-tool_calling/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.39">
    
    
      
        <title>Multi-agent Examples - simplechatbot</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8c3ca2c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#multi-agent-examples" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="simplechatbot" class="md-header__button md-logo" aria-label="simplechatbot" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            simplechatbot
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Multi-agent Examples
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/devincornell/simplechatbot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    devincornell/simplechatbot
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="simplechatbot" class="md-nav__button md-logo" aria-label="simplechatbot" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    simplechatbot
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/devincornell/simplechatbot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    devincornell/simplechatbot
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../a-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../b-model_specific_chatbots/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model-specific ChatBots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../c-structured_outputs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Structured Outputs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../d-tool_calling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tool Calling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Multi-agent Examples
  </span>
  

      </a>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="multi-agent-examples">Multi-agent Examples</h1>
<p>In this example I show an example of an agent that writes a story using a series of steps.</p>
<ol>
<li>The user provides an idea for their story.</li>
<li><code>OutlineBot</code> generates an outline for the story including a topic, narrative arc, title, and individual chapter narratives, events, and titles.</li>
<li><code>StoryBot</code> creates the first chapter based on the chatper and overall story outines.</li>
<li><code>SummaryBot</code> creates a summary of the newly generated chapter.</li>
<li>The chapter summary is passed to <code>StoryBot</code> along with section the outline to generate the next chapter.</li>
<li>All chapter follow steps 3-5.
...</li>
<li>The chapter are combined into a full story.</li>
</ol>
<p><img alt="Story bot design diagram" src="https://storage.googleapis.com/public_data_09324832787/story_bot_design.svg" /></p>
<hr />
<div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">pydantic</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="kn">import</span> <span class="nn">typing</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="kn">import</span> <span class="nn">pathlib</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="kn">import</span> <span class="nn">sys</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;../src/&#39;</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="kn">import</span> <span class="nn">simplechatbot</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="kn">from</span> <span class="nn">simplechatbot.openai_agent</span> <span class="kn">import</span> <span class="n">OpenAIAgent</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="kn">from</span> <span class="nn">simplechatbot.ollama_agent</span> <span class="kn">import</span> <span class="n">OllamaAgent</span>
</code></pre></div></td></tr></table></div>
<hr />
<p>First I create a new agent from OpenAI using the API stored in the keychain file. Most importantly, the agent maintains a LangChain chat model so we can use the <code>base_agent</code> to create new application-specific agents.</p>
<hr />
<div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>    <span class="n">keychain</span> <span class="o">=</span> <span class="n">simplechatbot</span><span class="o">.</span><span class="n">APIKeyChain</span><span class="o">.</span><span class="n">from_json_file</span><span class="p">(</span><span class="s1">&#39;../keys.json&#39;</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>    <span class="n">base_agent</span> <span class="o">=</span> <span class="n">OpenAIAgent</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>        <span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;gpt-4o-mini&#39;</span><span class="p">,</span> 
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>        <span class="n">api_key</span><span class="o">=</span><span class="n">keychain</span><span class="p">[</span><span class="s1">&#39;openai&#39;</span><span class="p">],</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>    <span class="p">)</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="k">else</span><span class="p">:</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a>    <span class="n">base_agent</span> <span class="o">=</span> <span class="n">OllamaAgent</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>        <span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;llama3.1&#39;</span><span class="p">,</span> 
<a id="__codelineno-1-10" name="__codelineno-1-10"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
<hr />
<p>Next we create the <code>StoryOutline</code> pydantic type to describe the structure of the output. Notice that the <code>StoryOutline</code> has a variable number of chapters, each with its own narrative, events, and title. Also note that the attribute order for <code>StoryOutline</code> follows the flow of topic, narrative, chapters, and then finally title. The values will be generated in that order, so we choose an ordering that most effectively can capture the process of producing creative stories.</p>
<p>Also essential to this agent is the system prompt, which can be adjusted given feedback about outline qualities.</p>
<hr />
<div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">class</span> <span class="nc">ChapterOutline</span><span class="p">(</span><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Outline of a chapter in a story.&quot;&quot;&quot;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="n">narrative_arc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">pydantic</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The narrative arc of the story.&quot;</span><span class="p">)</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>    <span class="n">events</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">pydantic</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;List of the most important events that happen in the chapter.&quot;</span><span class="p">)</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">pydantic</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Title of the chapter.&quot;</span><span class="p">)</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="k">class</span> <span class="nc">StoryOutline</span><span class="p">(</span><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Outline of the story.&quot;&quot;&quot;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>    <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">pydantic</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The main topic of the story.&quot;</span><span class="p">)</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>    <span class="n">narrative_arc</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">pydantic</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The narrative arc of the story.&quot;</span><span class="p">)</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a>    <span class="n">chapters</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChapterOutline</span><span class="p">]</span> <span class="o">=</span> <span class="n">pydantic</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;List of chapters in the story.&quot;</span><span class="p">)</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">pydantic</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Title of the story.&quot;</span><span class="p">)</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="k">class</span> <span class="nc">OutlineBot</span><span class="p">:</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a>    <span class="n">system_prompt</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a>        <span class="s2">&quot;The user will provide you a description of a story, and you must create a chapter outline with titles and brief descriptions. &quot;</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a>        <span class="s2">&quot;Each section should contain a title and a brief description of what happens in that section. &quot;</span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a>        <span class="s2">&quot;The sections should all be part of a single narrative ark, but each section should have a complete beginning, middle, and end. &quot;</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a>    <span class="p">)</span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_agent</span><span class="p">:</span> <span class="n">simplechatbot</span><span class="o">.</span><span class="n">Agent</span><span class="p">):</span>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">agent</span> <span class="o">=</span> <span class="n">base_agent</span><span class="o">.</span><span class="n">new_agent_from_model</span><span class="p">(</span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a>            <span class="n">system_prompt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">system_prompt</span><span class="p">,</span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a>        <span class="p">)</span>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a>
<a id="__codelineno-2-26" name="__codelineno-2-26"></a>    <span class="k">def</span> <span class="nf">create_outline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">story_description</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">simplechatbot</span><span class="o">.</span><span class="n">StructuredOutputResult</span><span class="p">:</span>
<a id="__codelineno-2-27" name="__codelineno-2-27"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">chat_structured</span><span class="p">(</span><span class="n">story_description</span><span class="p">,</span> <span class="n">output_structure</span><span class="o">=</span><span class="n">StoryOutline</span><span class="p">)</span>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="n">outline_bot</span> <span class="o">=</span> <span class="n">OutlineBot</span><span class="p">(</span><span class="n">base_agent</span><span class="p">)</span>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a><span class="n">outline_bot</span>
</code></pre></div></td></tr></table></div>
<p>text:</p>
<div class="language-text highlight"><pre><span></span><code>&lt;__main__.OutlineBot at 0x109b68770&gt;
</code></pre></div>
<hr />
<p>Next we create <code>ChapterBot</code>, which will generate the actual chapter content based on information generated in the outline and a summary of the previous chapter (if one exists).</p>
<hr />
<div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span>
<span class="normal"><a href="#__codelineno-3-28">28</a></span>
<span class="normal"><a href="#__codelineno-3-29">29</a></span>
<span class="normal"><a href="#__codelineno-3-30">30</a></span>
<span class="normal"><a href="#__codelineno-3-31">31</a></span>
<span class="normal"><a href="#__codelineno-3-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">class</span> <span class="nc">ChapterBot</span><span class="p">:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>    <span class="n">system_prompt</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>        <span class="s2">&quot;You are designed to write a single chapter of a larger story based on the following information: </span><span class="se">\n\n</span><span class="s2">&quot;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>        <span class="s2">&quot;+ Overall story topic: The topic of the full story.</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>        <span class="s2">&quot;+ Chapter title: The title of the section you are writing.</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>        <span class="s2">&quot;+ Chapter description: A longer description of what happens in the section.</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>        <span class="s2">&quot;+ (optional) previous chapter summary: A summary of the previous chapter.</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a>        <span class="s2">&quot;Your responses should only include text that is part of the story. Do not include the chapter title </span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a>        <span class="s2">&quot;or any other information that is not part of the story itself.</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>        <span class="s2">&quot;The story chapter should be super short, so keep that in mind!&quot;</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a>    <span class="p">)</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_agent</span><span class="p">:</span> <span class="n">simplechatbot</span><span class="o">.</span><span class="n">Agent</span><span class="p">):</span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">agent</span> <span class="o">=</span> <span class="n">base_agent</span><span class="o">.</span><span class="n">new_agent_from_model</span><span class="p">(</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a>            <span class="n">system_prompt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">system_prompt</span><span class="p">,</span>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a>        <span class="p">)</span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a>    <span class="k">def</span> <span class="nf">write_chapter</span><span class="p">(</span>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a>        <span class="n">story_outline</span><span class="p">:</span> <span class="n">StoryOutline</span><span class="p">,</span>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a>        <span class="n">chapter_outline</span><span class="p">:</span> <span class="n">ChapterOutline</span><span class="p">,</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a>        <span class="n">prev_chapter_summary</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a>        <span class="n">prompt</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a>            <span class="sa">f</span><span class="s1">&#39;General story topic: &quot;</span><span class="si">{</span><span class="n">story_outline</span><span class="o">.</span><span class="n">topic</span><span class="si">}</span><span class="s1">&quot;</span><span class="se">\n\n</span><span class="s1">&#39;</span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a>            <span class="sa">f</span><span class="s1">&#39;Chapter title: &quot;</span><span class="si">{</span><span class="n">chapter_outline</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s1">&quot;</span><span class="se">\n\n</span><span class="s1">&#39;</span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a>            <span class="sa">f</span><span class="s1">&#39;Chapter narrative arc: &quot;</span><span class="si">{</span><span class="n">chapter_outline</span><span class="o">.</span><span class="n">narrative_arc</span><span class="si">}</span><span class="s1">&quot;</span><span class="se">\n\n</span><span class="s1">&#39;</span>
<a id="__codelineno-3-28" name="__codelineno-3-28"></a>            <span class="sa">f</span><span class="s1">&#39;Previous chapter summary: &quot;</span><span class="si">{</span><span class="n">prev_chapter_summary</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">prev_chapter_summary</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="kc">None</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;No previous chapter - this is the first!&quot;</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
<a id="__codelineno-3-29" name="__codelineno-3-29"></a>        <span class="p">)</span>
<a id="__codelineno-3-30" name="__codelineno-3-30"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">add_to_history</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">progress_and_collect</span><span class="p">()</span><span class="o">.</span><span class="n">content</span>
<a id="__codelineno-3-31" name="__codelineno-3-31"></a>
<a id="__codelineno-3-32" name="__codelineno-3-32"></a><span class="n">chapter_bot</span> <span class="o">=</span> <span class="n">ChapterBot</span><span class="p">(</span><span class="n">base_agent</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<hr />
<p>Finally we create <code>SummaryBot</code>, which has the simple task of generating a summary of a given chapter.</p>
<hr />
<div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">class</span> <span class="nc">SummaryBot</span><span class="p">:</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>    <span class="n">system_prompt</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>        <span class="s1">&#39;You need to create a summary of the story chapter provided to you by the user. &#39;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a>        <span class="s1">&#39;The summary should include names of relevant characters and capture the story arc of the chapter. &#39;</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>    <span class="p">)</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_agent</span><span class="p">:</span> <span class="n">simplechatbot</span><span class="o">.</span><span class="n">Agent</span><span class="p">):</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">agent</span> <span class="o">=</span> <span class="n">base_agent</span><span class="o">.</span><span class="n">new_agent_from_model</span><span class="p">(</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a>            <span class="n">system_prompt</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">system_prompt</span><span class="p">,</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a>        <span class="p">)</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a>    <span class="k">def</span> <span class="nf">summarize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chapter_text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a>        <span class="n">prompt</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a>            <span class="sa">f</span><span class="s1">&#39;Chapter text:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">chapter_text</span><span class="si">}</span><span class="s1">&#39;</span>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a>        <span class="p">)</span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">add_to_history</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">progress_and_collect</span><span class="p">()</span><span class="o">.</span><span class="n">content</span>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="n">summary_bot</span> <span class="o">=</span> <span class="n">SummaryBot</span><span class="p">(</span><span class="n">base_agent</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<hr />
<p>Now we can create a <code>Story</code> type to tie it all together: it will contain the overal narrative arc as well as individual chapter outline, text, and summaries. The <code>generate_from_topic</code> method accepts a topic and from there will generate an outline and sequentially generate chapters and chapter summaries of the story.</p>
<hr />
<div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span>
<span class="normal"><a href="#__codelineno-5-27">27</a></span>
<span class="normal"><a href="#__codelineno-5-28">28</a></span>
<span class="normal"><a href="#__codelineno-5-29">29</a></span>
<span class="normal"><a href="#__codelineno-5-30">30</a></span>
<span class="normal"><a href="#__codelineno-5-31">31</a></span>
<span class="normal"><a href="#__codelineno-5-32">32</a></span>
<span class="normal"><a href="#__codelineno-5-33">33</a></span>
<span class="normal"><a href="#__codelineno-5-34">34</a></span>
<span class="normal"><a href="#__codelineno-5-35">35</a></span>
<span class="normal"><a href="#__codelineno-5-36">36</a></span>
<span class="normal"><a href="#__codelineno-5-37">37</a></span>
<span class="normal"><a href="#__codelineno-5-38">38</a></span>
<span class="normal"><a href="#__codelineno-5-39">39</a></span>
<span class="normal"><a href="#__codelineno-5-40">40</a></span>
<span class="normal"><a href="#__codelineno-5-41">41</a></span>
<span class="normal"><a href="#__codelineno-5-42">42</a></span>
<span class="normal"><a href="#__codelineno-5-43">43</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kn">import</span> <span class="nn">tqdm</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="k">class</span> <span class="nc">Chapter</span><span class="p">(</span><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>    <span class="n">i</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>    <span class="n">outline</span><span class="p">:</span> <span class="n">ChapterOutline</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a>    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a>    <span class="n">summary</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="k">class</span> <span class="nc">Story</span><span class="p">(</span><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span><span class="p">):</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a>    <span class="n">outline</span><span class="p">:</span> <span class="n">StoryOutline</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a>    <span class="n">chapters</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Chapter</span><span class="p">]</span> <span class="o">=</span> <span class="n">pydantic</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a>    <span class="k">def</span> <span class="nf">generate_from_topic</span><span class="p">(</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a>        <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a>        <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a>        <span class="n">outline_bot</span><span class="p">:</span> <span class="n">OutlineBot</span><span class="p">,</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a>        <span class="n">chapter_bot</span><span class="p">:</span> <span class="n">ChapterBot</span><span class="p">,</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a>        <span class="n">summary_bot</span><span class="p">:</span> <span class="n">SummaryBot</span><span class="p">,</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Self</span><span class="p">:</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a>        <span class="n">outline_result</span> <span class="o">=</span> <span class="n">outline_bot</span><span class="o">.</span><span class="n">create_outline</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a>        <span class="n">outline</span><span class="p">:</span> <span class="n">StoryOutline</span> <span class="o">=</span> <span class="n">outline_result</span><span class="o">.</span><span class="n">data</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a>        <span class="n">chapters</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a>        <span class="n">prev_summary</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-5-26" name="__codelineno-5-26"></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">chapter</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tqdm</span><span class="o">.</span><span class="n">tqdm</span><span class="p">(</span><span class="n">outline</span><span class="o">.</span><span class="n">chapters</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">80</span><span class="p">)):</span>
<a id="__codelineno-5-27" name="__codelineno-5-27"></a>            <span class="n">chapter_text</span> <span class="o">=</span> <span class="n">chapter_bot</span><span class="o">.</span><span class="n">write_chapter</span><span class="p">(</span>
<a id="__codelineno-5-28" name="__codelineno-5-28"></a>                <span class="n">story_outline</span><span class="o">=</span><span class="n">outline</span><span class="p">,</span> 
<a id="__codelineno-5-29" name="__codelineno-5-29"></a>                <span class="n">chapter_outline</span><span class="o">=</span><span class="n">chapter</span><span class="p">,</span>
<a id="__codelineno-5-30" name="__codelineno-5-30"></a>                <span class="n">prev_chapter_summary</span><span class="o">=</span><span class="n">prev_summary</span><span class="p">,</span>
<a id="__codelineno-5-31" name="__codelineno-5-31"></a>            <span class="p">)</span>
<a id="__codelineno-5-32" name="__codelineno-5-32"></a>            <span class="n">summary</span> <span class="o">=</span> <span class="n">summary_bot</span><span class="o">.</span><span class="n">summarize</span><span class="p">(</span><span class="n">chapter_text</span><span class="p">)</span>
<a id="__codelineno-5-33" name="__codelineno-5-33"></a>            <span class="n">prev_summary</span> <span class="o">=</span> <span class="n">summary</span>
<a id="__codelineno-5-34" name="__codelineno-5-34"></a>            <span class="n">chapters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Chapter</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">outline</span><span class="o">=</span><span class="n">chapter</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">chapter_text</span><span class="p">,</span> <span class="n">summary</span><span class="o">=</span><span class="n">summary</span><span class="p">))</span>
<a id="__codelineno-5-35" name="__codelineno-5-35"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">outline</span><span class="o">=</span><span class="n">outline</span><span class="p">,</span> <span class="n">chapters</span><span class="o">=</span><span class="n">chapters</span><span class="p">)</span>
<a id="__codelineno-5-36" name="__codelineno-5-36"></a>
<a id="__codelineno-5-37" name="__codelineno-5-37"></a>    <span class="k">def</span> <span class="nf">add_chapter</span><span class="p">(</span>
<a id="__codelineno-5-38" name="__codelineno-5-38"></a>        <span class="bp">self</span><span class="p">,</span> 
<a id="__codelineno-5-39" name="__codelineno-5-39"></a>        <span class="n">outline</span><span class="p">:</span> <span class="n">ChapterOutline</span><span class="p">,</span>
<a id="__codelineno-5-40" name="__codelineno-5-40"></a>        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-5-41" name="__codelineno-5-41"></a>        <span class="n">summary</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-5-42" name="__codelineno-5-42"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-5-43" name="__codelineno-5-43"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">chapters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Chapter</span><span class="p">(</span><span class="n">outline</span><span class="o">=</span><span class="n">outline</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">summary</span><span class="o">=</span><span class="n">summary</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<hr />
<p>Finally, we define a topic and generate a new story!</p>
<hr />
<div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">q</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>    <span class="sa">f</span><span class="s1">&#39;The story should be about two friends who met when they were young and then lost touch.&#39;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>    <span class="s1">&#39;They meet again as adults and have to navigate their new relationship. &#39;</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="p">)</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="n">story</span> <span class="o">=</span> <span class="n">Story</span><span class="o">.</span><span class="n">generate_from_topic</span><span class="p">(</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a>    <span class="n">topic</span><span class="o">=</span><span class="n">q</span><span class="p">,</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a>    <span class="n">outline_bot</span><span class="o">=</span><span class="n">outline_bot</span><span class="p">,</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a>    <span class="n">chapter_bot</span><span class="o">=</span><span class="n">chapter_bot</span><span class="p">,</span>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a>    <span class="n">summary_bot</span><span class="o">=</span><span class="n">summary_bot</span><span class="p">,</span>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>stderr:</p>
<div class="language-text highlight"><pre><span></span><code>342it [00:05, 63.03it/s]
188it [00:02, 81.52it/s]
257it [00:03, 72.37it/s]
176it [00:02, 78.58it/s]
439it [00:05, 79.36it/s]
128it [00:01, 82.71it/s] 
355it [00:04, 82.32it/s]
185it [00:04, 38.40it/s]
457it [00:05, 80.11it/s]
202it [00:02, 78.42it/s]
355it [00:04, 81.00it/s]
163it [00:01, 85.35it/s] 
6it [00:44,  7.39s/it]
</code></pre></div>
<hr />
<hr />
<div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">story</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">title</span>
</code></pre></div></td></tr></table></div>
<p>text:</p>
<div class="language-text highlight"><pre><span></span><code>&#39;Bridges to the Past&#39;
</code></pre></div>
<hr />
<hr />
<div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">narrative_arc</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>stdout:</p>
<div class="language-text highlight"><pre><span></span><code>Two childhood friends, separated by life changes, reunite as adults and must grapple with their evolution while rekindling their bond.
</code></pre></div>
<hr />
<hr />
<div class="language-python highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span>
<span class="normal"><a href="#__codelineno-9-20">20</a></span>
<span class="normal"><a href="#__codelineno-9-21">21</a></span>
<span class="normal"><a href="#__codelineno-9-22">22</a></span>
<span class="normal"><a href="#__codelineno-9-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="n">dest</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;story_results/&#39;</span><span class="p">)</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="n">dest</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="n">overview</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span><span class="si">{</span><span class="n">story</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">title</span><span class="si">}</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">chapters</span><span class="p">)</span><span class="si">}</span><span class="s1"> Chapters</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="s1">Topic: </span><span class="si">{</span><span class="n">story</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">topic</span><span class="si">}</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="s1">--------------------------------</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="s1">Narrative:</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="si">{</span><span class="n">story</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">narrative_arc</span><span class="si">}</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="s1">--------------------------------</span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="s1">Chapters:</span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="s1">&#39;&#39;&#39;</span>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="n">overview</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">narrative_arc</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">story</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">chapters</span><span class="p">])</span>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="k">with</span> <span class="n">dest</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s1">&#39;overview.txt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">overview</span><span class="p">)</span>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a>
<a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="k">for</span> <span class="n">chapter</span> <span class="ow">in</span> <span class="n">story</span><span class="o">.</span><span class="n">chapters</span><span class="p">:</span>
<a id="__codelineno-9-21" name="__codelineno-9-21"></a>    <span class="n">events</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\t</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">. </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chapter</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">events</span><span class="p">)])</span>
<a id="__codelineno-9-22" name="__codelineno-9-22"></a>    <span class="k">with</span> <span class="n">dest</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">chapter</span><span class="o">.</span><span class="n">i</span><span class="si">}</span><span class="s1">. </span><span class="si">{</span><span class="n">chapter</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s1">.txt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-9-23" name="__codelineno-9-23"></a>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">chapter</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="se">\n\n</span><span class="s1">Narrative: </span><span class="si">{</span><span class="n">chapter</span><span class="o">.</span><span class="n">outline</span><span class="o">.</span><span class="n">narrative_arc</span><span class="si">}</span><span class="se">\n\n</span><span class="s1">Events:</span><span class="se">\n</span><span class="si">{</span><span class="n">events</span><span class="si">}</span><span class="se">\n\n</span><span class="s1">------------------</span><span class="se">\n</span><span class="s1">Summary:</span><span class="se">\n</span><span class="si">{</span><span class="n">chapter</span><span class="o">.</span><span class="n">summary</span><span class="si">}</span><span class="se">\n\n\n</span><span class="s1">------------------</span><span class="se">\n</span><span class="si">{</span><span class="n">chapter</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.expand", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.525ec568.min.js"></script>
      
    
  </body>
</html>